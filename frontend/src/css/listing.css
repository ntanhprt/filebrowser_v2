/* Base Listing Styles */
#listing {
  padding-bottom: 5rem;
}

#listing .item {
  background: var(--surfacePrimary);
  border-bottom: 1px solid var(--divider);
  display: flex;
  align-items: center;
  transition: background 0.15s;
  cursor: pointer;
  user-select: none;
}

#listing .item:hover {
  background: var(--hover);
}

#listing .item[aria-selected="true"] {
  background: var(--selection) !important;
}

#listing .item.header {
  position: sticky;
  top: 4em;
  z-index: 10;
  font-weight: 500;
  font-size: 0.85em;
  color: var(--textSecondary);
  cursor: default;
}

#listing .item.header:hover {
  background: var(--surfacePrimary);
}

#listing .item.header p {
  display: flex;
  align-items: center;
  gap: 4px;
  cursor: pointer;
}

#listing .item.header p:hover {
  color: var(--blue);
}

#listing .item.header p.active {
  color: var(--blue);
}

#listing .item.header i {
  font-size: 1.2em;
}

/* ========== LIST VIEW ========== */
#listing.list .item {
  padding: 0 1em;
  height: 3.5em;
}

#listing.list .item>div:first-of-type {
  width: 3em;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

#listing.list .item>div:last-of-type {
  display: flex;
  flex: 1;
  align-items: center;
  min-width: 0;
}

#listing.list .name {
  flex: 1;
  font-weight: 500;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  min-width: 0;
  padding-right: 1em;
}

#listing.list .size {
  flex: 0 0 6em;
  color: var(--textSecondary);
  font-size: 0.85em;
  text-align: right;
  padding-right: 2em;
}

#listing.list .modified {
  flex: 0 0 10em;
  color: var(--textTertiary);
  font-size: 0.85em;
}

#listing.list .item i {
  font-size: 1.5em;
}

/* ========== COMPACT VIEW (Multi-column, full file names with wrap) ========== */
#listing.compact {
  display: block;
  column-width: 280px;
  column-gap: 1em;
  padding: 0.5em 1em;
}

#listing.compact .item {
  display: inline-flex;
  width: 100%;
  break-inside: avoid;
  page-break-inside: avoid;
  padding: 0.25em 0.5em;
  height: auto;
  min-height: 1.6em;
  border-radius: 4px;
  border-bottom: none;
  align-items: baseline;
  margin-bottom: 2px;
}

#listing.compact .item:hover {
  background: var(--hover);
}

#listing.compact .item>div:first-of-type {
  width: 1.4em;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

#listing.compact .item>div:last-of-type {
  display: flex;
  flex: 1;
}

#listing.compact .name {
  font-size: 1em;
  word-break: break-word;
  line-height: 1.4;
}

/* Hide size and modified in compact view */
#listing.compact .size,
#listing.compact .modified {
  display: none;
}

#listing.compact .item i {
  font-size: 1em;
}

/* Hide header row in compact view */
#listing.compact .item.header {
  display: none;
}

/* ========== MOSAIC VIEW (Tiles) ========== */
#listing.mosaic {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
  gap: 1em;
  padding: 1em;
}

#listing.mosaic .item {
  flex-direction: column;
  height: auto;
  padding: 1em;
  border-radius: 8px;
  border: 1px solid var(--divider);
  justify-content: center;
  text-align: center;
}

#listing.mosaic .item:hover {
  border-color: var(--blue);
  box-shadow: var(--shadow-sm);
}

#listing.mosaic .item>div:first-of-type {
  margin-bottom: 0.5em;
}

#listing.mosaic .item i {
  font-size: 3em;
}

#listing.mosaic .item img {
  width: 4em;
  height: 4em;
  object-fit: cover;
  border-radius: 4px;
}

#listing.mosaic .name {
  width: 100%;
  overflow: hidden;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  line-clamp: 2;
  font-size: 0.9em;
  font-weight: 500;
  word-break: break-word;
  line-height: 1.3;
  max-height: 2.6em;
}

#listing.mosaic .size,
#listing.mosaic .modified,
#listing.mosaic .item.header {
  display: none;
}

/* ========== MOSAIC GALLERY VIEW (Large Thumbnails) ========== */
#listing.mosaic.gallery {
  grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
  gap: 1.5em;
  padding: 1.5em;
}

#listing.mosaic.gallery .item {
  aspect-ratio: 1;
  padding: 0;
  overflow: hidden;
  border-radius: 12px;
  position: relative;
}

#listing.mosaic.gallery .item>div:first-of-type {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--surfaceSecondary);
  margin-bottom: 0;
}

#listing.mosaic.gallery .item img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 0;
}

#listing.mosaic.gallery .item i {
  font-size: 4em;
}

#listing.mosaic.gallery .item>div:last-of-type {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  padding: 1em 0.8em 0.8em;
  background: linear-gradient(transparent, rgba(0, 0, 0, 0.7));
}

#listing.mosaic.gallery .name {
  color: #fff;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
}

#listing.mosaic.gallery .size,
#listing.mosaic.gallery .modified {
  display: none;
}

/* ========== RESPONSIVE ========== */
@media (max-width: 600px) {
  #listing.list .size {
    display: none;
  }

  #listing.list .name {
    flex: 3;
  }

  #listing.list .modified {
    flex: 2;
  }
}

@media (max-width: 450px) {
  #listing.list .modified {
    display: none;
  }

  #listing.list .name {
    flex: 1;
  }
}